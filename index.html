<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lib Reader ( INDEX )</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/tomorrow-night.css">
	<link rel="stylesheet" type="text/css" href="css/styles.css">
	<script src="lib/highlight.pack.js"></script>
  </head>
  <body>
	<h3><a href="https://threejs.org">three.js</a> <a href="https://github.com/mrdoob/three.js">R88</a></h3>
	<br>
<ul id="">
<li><a href="cube.html#">cube</a></li>
<li><a href="depth.html#">depth</a></li>
<li><a href="distanceRGBA.html#">distanceRGBA</a></li>
<li><a href="equirect.html#">equirect</a></li>
<li><a href="linedashed.html#">linedashed</a></li>
<li><a href="meshbasic.html#">meshbasic</a></li>
<li><a href="meshlambert.html#">meshlambert</a></li>
<li><a href="meshphong.html#">meshphong</a></li>
<li><a href="meshphysical.html#">meshphysical/standard</a></li>
<li><a href="normal.html#">normal</a></li>
<li><a href="points.html#">points</a></li>
<li><a href="shadow.html#">shadow</a></li>
</ul>
<br><h1>Lib Reader</h1>
<br><p>Displays the contents of ShaderLib in three.js, including links to contextual references in ShaderChunks.</p><div class="indented"><br><a href="http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/">http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/</a>

<br><br><a href="http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations">http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations</a>

<br><br><a href="https://en.wikipedia.org/wiki/Relative_luminance">https://en.wikipedia.org/wiki/Relative_luminance</a>

<br><br><a href="https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf">https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf</a>

<br><br><a href="https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf">https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf</a>

<br><br><a href="http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html">http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html</a>

<br><br><a href="https://drive.google.com/file/d/0BzvWIdpUpRx_d09ndGVjNVJzZjA/view">https://drive.google.com/file/d/0BzvWIdpUpRx_d09ndGVjNVJzZjA/view</a>

<br><br><a href="https://eheitzresearch.wordpress.com/415-2/">https://eheitzresearch.wordpress.com/415-2/</a>

<br><br><a href="http://blog.selfshadow.com/sandbox/ltc.html">http://blog.selfshadow.com/sandbox/ltc.html</a>

<br><br><a href="http.developer.nvidia.com/GPUGems2/gpugems2_chapter24.html">http.developer.nvidia.com/GPUGems2/gpugems2_chapter24.html</a>

<br><br><a href="http://advances.realtimerendering.com/s2016/s2016_ltc_rnd.pdf">http://advances.realtimerendering.com/s2016/s2016_ltc_rnd.pdf</a>

<br><br><a href="https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile">https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile</a>

<br><br><a href="http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html">http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html</a>

<br><br><a href="http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html">http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html</a>

<br><br><a href="https://www.shadertoy.com/view/MslGR8">https://www.shadertoy.com/view/MslGR8</a>

<br><br><a href="https://gist.github.com/tschw/da10c43c467ce8afd0c4">https://gist.github.com/tschw/da10c43c467ce8afd0c4</a>

<br><br><a href="http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html">http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html</a>

<br><br><a href="http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html">http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html</a>

<br></div><br><p>There are 164 instances of "endif" in ShaderChunks.</p>
<br><p>There are 85 ShaderChunks, of which the following are not currently in use.</p><br>
<input id="toggle0" type="checkbox"><label for="toggle0" class="">/* encodings_pars_fragment.glsl */</label>
<div id="expand0" class=" expand"><pre><code class="glsl">
// For a discussion of what this is, please read this: <a href="http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/">http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/</a>


vec4 LinearToLinear( in vec4 value ) {
	return value;
}

vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );
}

vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );
}

vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );
}

// reference: <a href="http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html">http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html</a>

vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.xyz * value.w * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M            = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}

// reference: <a href="http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html">http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html</a>

vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float D      = max( maxRange / maxRGB, 1.0 );
	D            = min( floor( D ) / 255.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}

// LogLuv reference: <a href="http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html">http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html</a>


// M matrix, for encoding
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;
	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract(Le);
	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;
	return vResult;
}

// Inverse M matrix, for decoding
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;
	return vec4( max(vRGB, 0.0), 1.0 );
}
</code></pre></div>

<input id="toggle1" type="checkbox"><label for="toggle1" class="">/* tonemapping_pars_fragment.glsl */</label>
<div id="expand1" class=" expand"><pre><code class="glsl">
#ifndef saturate
	#define saturate(a) clamp( a, 0.0, 1.0 )
#endif

uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;

// exposure only
vec3 LinearToneMapping( vec3 color ) {

	return toneMappingExposure * color;

}

// source: <a href="https://www.cs.utah.edu/~reinhard/cdrom/">https://www.cs.utah.edu/~reinhard/cdrom/</a>

vec3 ReinhardToneMapping( vec3 color ) {

	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );

}

// source: <a href="http://filmicgames.com/archives/75">http://filmicgames.com/archives/75</a>

#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {

	// John Hable's filmic operator from Uncharted 2 video game
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );

}

// source: <a href="http://filmicgames.com/archives/75">http://filmicgames.com/archives/75</a>

vec3 OptimizedCineonToneMapping( vec3 color ) {

	// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );

}
</code></pre></div>
<br><h3>To do</h3><div class="indented">
<p> Limit frag level navigation to 'mesh' pages?</p>
<p>Indentation not robust in uniforms, could build them as ''chunk'' files first.</p>
<p><del>Surplus code tags, affects styles</del></p></div>
<br>
<br><h3>18 Dec 2017</h3><div class="indented">
<p>Make commented links live</p>
<p>Index for index.html</p>
<p>Add nav for frag level</p></div>
<br><h3>17 Dec 2017</h3><div class="indented">
<p>Fix redundant newlines</p></div>
<br><h3>16 Dec 2017</h3><div class="indented">
<p>Fix surplus code tags</p></div>
<br><h3>12 Dec 2017</h3><div class="indented">
<p>Fix points uniforms</p></div>
<br><h3>12 Dec 2017</h3><div class="indented">
<p>Recover missing lights uniforms and add rough indents</p>
<p>Some uniforms formatting</p>
<p>Add links to title</p></div>

<br><h3>11 Dec 2017</h3><div class="indented">

<p>Read from dev branch and push</p></div>

<br><br><a href="https://github.com/koober/Lib-Reader/">Source</a>
<br><br><script>hljs.initHighlightingOnLoad();</script>
</body></html>